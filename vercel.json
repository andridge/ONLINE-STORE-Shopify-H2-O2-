{
  "version": 1,
  "builds": [
    { "src": "server.js", "use": "@remix-run/dev" },
    {
      "src": "app/**",  
      "use": "@vercel/static",
      "config": { "basePath": "dist/client" }
    }
  ],
  "routes": [
    { "src": "/api/(.*)", "dest": "/api/$1" },
    { "src": "/", "dest": "/server.js" },
    { "src": "/(.*)", "dest": "/server.js" }
  ],
  "env": {
    "HYDROGEN_ASSET_BASE_URL": "/"
  },
  "files": [
    "public/**/*"
  ],
  "rewrites": [
    { "source": "/(.*)", "destination": "/server.js" }
  ],
  "remix": {
    "appDirectory": "app",
    "ignoredRouteFiles": ["**/.*"],
    "watchPaths": ["./public"],
    "server": "./server.js",
    "publicPath": "/build/",
    "assetsBuildDirectory": "dist/client/build",
    "serverBuildPath": "dist/worker/index.js",
    "serverMainFields": ["browser", "module", "main"],
    "serverConditions": ["worker"],
    "serverDependenciesToBundle": "all",
    "serverModuleFormat": "esm",
    "serverPlatform": "neutral",
    "serverMinify": "production"
  }
}
